2025-10-03 09:37:21.929 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-03 09:37:22.019 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-03 09:37:22.072 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-03 09:37:22.194 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-03 09:37:22.216 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-03 09:37:22.220 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-03 09:37:22.234 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-03 09:37:22.247 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-03 09:37:22.258 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-03 09:37:22.556 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-03 09:37:22.617 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-03 09:37:22.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-03 09:37:22.625 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-03 09:37:22.628 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-03 09:37:22.652 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Departments] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-03 09:37:22.685 +03:00 [INF] User profile is available. Using 'C:\Users\mamad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 09:37:22.701 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__adminEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MiddleName], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Email] = @__adminEmail_0
2025-10-03 09:37:22.934 +03:00 [INF] Now listening on: http://localhost:5007
2025-10-03 09:37:22.991 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 09:37:22.993 +03:00 [INF] Hosting environment: Development
2025-10-03 09:37:22.994 +03:00 [INF] Content root path: C:\Users\mamad\source\repos\AIMIS\Interchée\backend\Interchée
2025-10-03 09:37:28.792 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5007/ - null null
2025-10-03 09:37:29.058 +03:00 [WRN] Failed to determine the https port for redirect.
2025-10-03 09:37:29.145 +03:00 [INF] HTTP GET / responded 404 in 86.4774 ms
2025-10-03 09:37:29.166 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5007/ - 404 0 null 381.2662ms
2025-10-03 09:37:29.173 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5007/, Response status code: 404
2025-10-03 09:37:35.995 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5007/scalar/v1 - null null
2025-10-03 09:37:36.088 +03:00 [INF] Executing endpoint 'HTTP: GET /scalar/{documentName?}'
2025-10-03 09:37:36.344 +03:00 [INF] Write content with HTTP Response ContentType of text/html
2025-10-03 09:37:36.374 +03:00 [INF] Executed endpoint 'HTTP: GET /scalar/{documentName?}'
2025-10-03 09:37:36.377 +03:00 [INF] HTTP GET /scalar/v1 responded 200 in 357.6739 ms
2025-10-03 09:37:36.384 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5007/scalar/v1 - 200 null text/html 389.3529ms
2025-10-03 09:37:36.418 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5007/_framework/aspnetcore-browser-refresh.js - null null
2025-10-03 09:37:36.419 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5007/scalar/scalar.js - null null
2025-10-03 09:37:36.419 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5007/scalar/scalar.aspnetcore.js - null null
2025-10-03 09:37:36.420 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5007/_vs/browserLink - null null
2025-10-03 09:37:36.435 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5007/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.8074ms
2025-10-03 09:37:36.462 +03:00 [INF] CORS policy execution failed.
2025-10-03 09:37:36.464 +03:00 [INF] Executing endpoint 'HTTP: GET /scalar/scalar.js'
2025-10-03 09:37:36.466 +03:00 [INF] Request origin http://localhost:5007 does not have permission to access the resource.
2025-10-03 09:37:36.512 +03:00 [INF] Executing endpoint 'HTTP: GET /scalar/scalar.aspnetcore.js'
2025-10-03 09:37:36.534 +03:00 [INF] Sending file with download name ''.
2025-10-03 09:37:36.534 +03:00 [INF] Sending file with download name ''.
2025-10-03 09:37:36.562 +03:00 [INF] Executed endpoint 'HTTP: GET /scalar/scalar.aspnetcore.js'
2025-10-03 09:37:36.610 +03:00 [INF] Executed endpoint 'HTTP: GET /scalar/scalar.js'
2025-10-03 09:37:36.620 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5007/_vs/browserLink - 200 null text/javascript; charset=UTF-8 199.6389ms
2025-10-03 09:37:36.621 +03:00 [INF] HTTP GET /scalar/scalar.aspnetcore.js responded 200 in 160.2293 ms
2025-10-03 09:37:36.624 +03:00 [INF] HTTP GET /scalar/scalar.js responded 200 in 163.4330 ms
2025-10-03 09:37:36.628 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5007/scalar/scalar.aspnetcore.js - 200 1046 text/javascript 208.8063ms
2025-10-03 09:37:36.630 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5007/scalar/scalar.js - 200 869947 text/javascript 211.4801ms
2025-10-03 09:37:36.899 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5007/openapi/v1.json - null null
2025-10-03 09:37:36.906 +03:00 [INF] Executing endpoint 'HTTP: GET /openapi/{documentName}.json'
2025-10-03 09:37:37.157 +03:00 [INF] Executed endpoint 'HTTP: GET /openapi/{documentName}.json'
2025-10-03 09:37:37.161 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5007/openapi/v1.json - null null
2025-10-03 09:37:37.163 +03:00 [INF] HTTP GET /openapi/v1.json responded 200 in 257.1822 ms
2025-10-03 09:37:37.167 +03:00 [INF] Executing endpoint 'HTTP: GET /openapi/{documentName}.json'
2025-10-03 09:37:37.170 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5007/openapi/v1.json - 200 null application/json;charset=utf-8 271.2322ms
2025-10-03 09:37:37.238 +03:00 [INF] Executed endpoint 'HTTP: GET /openapi/{documentName}.json'
2025-10-03 09:37:37.242 +03:00 [INF] HTTP GET /openapi/v1.json responded 200 in 74.8154 ms
2025-10-03 09:37:37.246 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5007/openapi/v1.json - 200 null application/json;charset=utf-8 83.1867ms
2025-10-03 09:39:49.325 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5007/auth/login - application/json 56
2025-10-03 09:39:49.340 +03:00 [INF] CORS policy execution failed.
2025-10-03 09:39:49.342 +03:00 [INF] Request origin http://localhost:5007 does not have permission to access the resource.
2025-10-03 09:39:49.344 +03:00 [INF] Executing endpoint 'Interchée.Controllers.AuthController.Login (Interchée)'
2025-10-03 09:39:49.500 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Interchée.Contracts.Auth.AuthResultDto]] Login(Interchée.Contracts.Auth.LoginDto) on controller Interchée.Controllers.AuthController (Interchée).
2025-10-03 09:39:49.633 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsActive], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MiddleName], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-03 09:39:49.863 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-03 09:39:49.993 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__now_2='?' (DbType = DateTime2), @__userId_0='?' (DbType = Guid), @__now_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
UPDATE [r]
SET [r].[RevokedAt] = @__now_2
FROM [RefreshTokens] AS [r]
WHERE [r].[UserId] = @__userId_0 AND [r].[RevokedAt] IS NULL AND [r].[ExpiresAt] > @__now_1
2025-10-03 09:39:50.259 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 512), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([CreatedAt], [CreatedByIp], [ExpiresAt], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-10-03 09:39:50.324 +03:00 [INF] Executing OkObjectResult, writing value of type 'Interchée.Contracts.Auth.AuthResultDto'.
2025-10-03 09:39:50.369 +03:00 [INF] Executed action Interchée.Controllers.AuthController.Login (Interchée) in 847.8432ms
2025-10-03 09:39:50.372 +03:00 [INF] Executed endpoint 'Interchée.Controllers.AuthController.Login (Interchée)'
2025-10-03 09:39:50.374 +03:00 [INF] HTTP POST /auth/login responded 200 in 1033.8696 ms
2025-10-03 09:39:50.386 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5007/auth/login - 200 null application/json; charset=utf-8 1060.9967ms
